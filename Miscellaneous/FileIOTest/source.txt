using System;
using System.IO;
using System.IO.MemoryMappedFiles;

namespace FileIOTest
{
	class Support
	{
		public void Run(string[] args)
		{
			if(args.Length > 1 && args[0] == "-s")
				UseFileStream(args[1]);
			else if(args.Length > 1 && args[0] == "-m")
				UseMemoryMappedFile(args[1]);
			else
				Console.WriteLine("Invalid command!");
		}

		private static void UseFileStream(string fileToReverse)
		{
			using(var stream = new FileStream(fileToReverse, FileMode.Open, FileAccess.ReadWrite))
			{
				int sz = (int)stream.Length;
				byte[] buffer = new byte[sz];
				stream.Read(buffer, 0, sz);
				for(int i = 0, j = sz - 1; i < j; ++i, j--)
				{
					byte ib = buffer[i];
					byte jb = buffer[j];
					buffer[i] = jb;
					buffer[j] = ib;
				}
				stream.Position = 0;
				stream.Write(buffer, 0, sz);
			}
		}


		private static void UseMemoryMappedFile(string fileToReverse)
		{

		}
	}
}
